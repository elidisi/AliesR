{% load static %}
<!DOCTYPE html>
<html>
  {% block head %}
  <head>
    <title>Dashboard</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css\styles.css' %}?=version1 "
    />
  </head>
  {% endblock %}
  <body>
    <div id="login">
      <div class="login-container">
        <img
          src="{% static 'media\logo.png'%}"
          alt="Logo Image"
          width="300px"
          height="300px"
        />
        <div class="input-box">
          <input
            type="text"
            request="POST"
            id="username"
            placeholder="Username"
            onkeydown="checkEnter(event)"
          />
          <input
            type="password"
            request="POST"
            id="password"
            placeholder="Password"
            onkeydown="checkEnter(event)"
          />
          <button id="login-btn" type="submit" request="POST">Login</button>
        </div>
      </div>
      <script src="{% static 'js\login.js' %}"></script>
      <!-- Link the JavaScript file -->
    </div>

    {% block content %}
    <header>
      <div class="menubar">
        <!-- Add your menu bar content here -->
        <div class="menu-left">
        </div>
        <div class="menu-center">
          <img src="{% static 'media\mlogo.png' %}" alt="Center Image" />
        </div>
        <div class="menu-right">
          <button onclick="logout()" class="rtnbtn">LOGOUT</a>
        </div>
      </div>
      
    </header>
    <div class="dashboard">
      <div class="top-row">
        <a href="/order" class="btn">Order</a>
        <a href="/queue" class="btn">Queue</a>
      </div>
      <div class="bottom-row">
        <!--<a href="/pricebook" class="btn">Pricebook</a>-->
        <a href="/history" class="btn">History</a>
        <a href="/admin" class="btn">Inventory</a>
      </div>

      <script>
        window.onload = function () {
          deleteAll();
          var isLoggedIn = sessionStorage.getItem("isLoggedIn");
  if (isLoggedIn === "true") {
    var loginPage = document.getElementById("login");
    loginPage.style.display = "none";
  }
        };

        function deleteAll() {
          var xhr = new XMLHttpRequest();
          xhr.open("POST", "/delete-all/");
          xhr.setRequestHeader(
            "Content-Type",
            "application/x-www-form-urlencoded"
          );
          xhr.setRequestHeader("X-CSRFToken", getCookie("csrftoken"));
          // Send the request to the server
          xhr.send();
        }

        function getCookie(name) {
          var value = "; " + document.cookie;
          var parts = value.split("; " + name + "=");
          if (parts.length == 2) return parts.pop().split(";").shift();
      }
      </script>
    </div>
    {% endblock %}
  </body>
</html>
